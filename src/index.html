<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container mt-3">
      <div class="jumbotron">
        <h1 class="display-4">Welcome to our Frontend</h1>
        <p class="lead">This frontent Consumes a backend API</p>
        <hr class="my-4" />
        <p>This is for learning purposes</p>
        <div class="row align-items-center">
          <div class="col-sm-4">
            <a
              class="btn btn-primary justify-content-end"
              href="./register.html"
              role="button"
              >Register</a
            >

            <a class="btn btn-primary" href="./login.html" role="button"
              >Sign In</a
            >
          </div>
          <div
            class="d-flex justify-content-end col-sm-8 d-none"
            id="users-link"
          ></div>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"
      integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/"
      crossorigin="anonymous"
    ></script>
    <script>
      const parseJwt = (token) => {
        try {
          return JSON.parse(atob(token.split(".")[1]));
        } catch (e) {
          return null;
        }
      };

      let user = parseJwt(localStorage.token);
      let usersLink = document.getElementById("users-link");
      let link = document.createElement("a");

      link.setAttribute("href", "./users.html");
      link.setAttribute("class", "stretched-link");
      link.innerHTML = "View Users";
      if (user.isAdmin) {
        usersLink.classList.remove("d-none");
        usersLink.appendChild(link);
      }
    </script>
  </body>
</html>
